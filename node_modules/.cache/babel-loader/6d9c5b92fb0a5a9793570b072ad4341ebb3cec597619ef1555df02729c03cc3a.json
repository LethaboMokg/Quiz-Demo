{"ast":null,"code":"import { useEffect, useState, useRef } from 'react';\nexport default function usePromise(promiseOrFn) {\n  const [state, setState] = useState({\n    loading: !!promiseOrFn,\n    error: null,\n    value: undefined\n  });\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    if (!promiseOrFn) {\n      setState({\n        loading: false,\n        error: null,\n        value: undefined\n      });\n    } else {\n      if (state.loading === false) {\n        setState({\n          loading: true,\n          error: null,\n          value: undefined\n        });\n      }\n      let promise;\n      if (typeof promiseOrFn === 'function') {\n        promise = promiseOrFn();\n      } else {\n        promise = promiseOrFn;\n      }\n      promise.then(value => {\n        if (isMounted.current) {\n          setState({\n            loading: false,\n            error: null,\n            value\n          });\n        }\n      }).catch(error => {\n        if (isMounted.current) {\n          setState({\n            loading: false,\n            error,\n            value: undefined\n          });\n        }\n      });\n    }\n    return () => {\n      isMounted.current = false;\n    };\n  }, [promiseOrFn]);\n  return state;\n}","map":{"version":3,"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAEnD,eAAc,SAAUC,UAAU,CAChCC,WAA4C;EAM5C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAI/B;IACDM,OAAO,EAAE,CAAC,CAACH,WAAW;IACtBI,KAAK,EAAE,IAAI;IACXC,KAAK,EAAEC;GACR,CAAC;EACF,MAAMC,SAAS,GAAGT,MAAM,CAAC,KAAK,CAAC;EAC/BF,SAAS,CAAC,MAAK;IACbW,SAAS,CAACC,OAAO,GAAG,IAAI;IACxB,IAAI,CAACR,WAAW,EAAE;MAChBE,QAAQ,CAAC;QACPC,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE,IAAI;QACXC,KAAK,EAAEC;OACR,CAAC;KACH,MAAM;MACL,IAAIL,KAAK,CAACE,OAAO,KAAK,KAAK,EAAE;QAC3BD,QAAQ,CAAC;UACPC,OAAO,EAAE,IAAI;UACbC,KAAK,EAAE,IAAI;UACXC,KAAK,EAAEC;SACR,CAAC;;MAEJ,IAAIG,OAAmB;MACvB,IAAI,OAAOT,WAAW,KAAK,UAAU,EAAE;QACrCS,OAAO,GAAGT,WAAW,EAAE;OACxB,MAAM;QACLS,OAAO,GAAGT,WAAW;;MAGvBS,OAAO,CACJC,IAAI,CAAEL,KAAK,IAAI;QACd,IAAIE,SAAS,CAACC,OAAO,EAAE;UACrBN,QAAQ,CAAC;YACPC,OAAO,EAAE,KAAK;YACdC,KAAK,EAAE,IAAI;YACXC;WACD,CAAC;;MAEN,CAAC,CAAC,CACDM,KAAK,CAAEP,KAAK,IAAI;QACf,IAAIG,SAAS,CAACC,OAAO,EAAE;UACrBN,QAAQ,CAAC;YACPC,OAAO,EAAE,KAAK;YACdC,KAAK;YACLC,KAAK,EAAEC;WACR,CAAC;;MAEN,CAAC,CAAC;;IAGN,OAAO,MAAK;MACVC,SAAS,CAACC,OAAO,GAAG,KAAK;IAC3B,CAAC;EACH,CAAC,EAAE,CAACR,WAAW,CAAC,CAAC;EAEjB,OAAOC,KAAK;AACd","names":["useEffect","useState","useRef","usePromise","promiseOrFn","state","setState","loading","error","value","undefined","isMounted","current","promise","then","catch"],"sources":["../../src/usePromise.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}